<!DOCTYPE html>
<html>

<head>

<title>Stack 3</title>
<meta charset="utf-8">

<link rel="stylesheet" href="./css/style.css">


</head>

<body>

<!--<canvas id="thecanvas" width="640" height="480"></canvas>-->
x : <input id="in_x" type="text" value="0"><br>
y : <input id="in_y" type="text" value="0"><br>
z : <input id="in_z" type="text" value="0"><br>

<br>

val : <input id="in_val" type="text" value="0">

<br>
<br>


<div id="out"></div>

<script src="./stack_3.js"></script>
<script>

stack.set({

    w: 8,
	h: 8,
	d: 4,
	val : 0

});


var get = function(id){

    return document.getElementById(id);

},

htmlLayer = function(z){

    var html = '<table class=\"stack\"><tr>', i = 0, len = stack.w * stack.h;
   
    while(i < len){
   
        html += '<td>'+stack.getPoint(i).val+'<\/td>';
		
		if(stack.getPoint(i).x === stack.w-1){
		
		    html += '<\/tr><tr>';
		
		}
   
        i += 1;
   
    }
   
    html += '<td colspan=\"' + stack.w + '\";>layer '+z+'<\/td>';
   
    return html + '<\/tr><\/table>';

},


htmlStack = function(){

    var html = '', i=0, len = stack.d;
	
	while(i < len){
	
	    html += htmlLayer(i);
	
	    i += 1;
	
	}
	
	return html;

},

draw = function(){

    get('out').innerHTML = htmlStack();

},

onPosChange = function(){

    console.log(get('in_x').value);

    console.log(stack.getPoint(
	
	    Number(get('in_x').value),
		Number(get('in_y').value),
		Number(get('in_z').value)
	
	));

};

draw();



get('in_x').addEventListener('input', function(e){

    var inVal = Number(e.target.value);
    
	e.target.value = inVal;
	
	if(inVal + '' === 'NaN'){e.target.value = 0;}
	if(inVal >= stack.w){e.target.value = stack.w-1;}

	onPosChange();
	
});

get('in_y').addEventListener('input', function(e){

    var inVal = Number(e.target.value);
    
	e.target.value = inVal;
	
	if(inVal + '' === 'NaN'){e.target.value = 0;}
	if(inVal >= stack.h){e.target.value = stack.h-1;}

	onPosChange();
	
});

get('in_z').addEventListener('input', function(e){

    var inVal = Number(e.target.value);
    
	e.target.value = inVal;
	
	if(inVal + '' === 'NaN'){e.target.value = 0;}
	if(inVal >= stack.d){e.target.value = stack.d-1;}

	onPosChange();
	
});

</script>

</body>

</html>